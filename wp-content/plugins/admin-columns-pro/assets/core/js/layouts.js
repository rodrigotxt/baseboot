!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}({3:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}document.addEventListener("DOMContentLoaded",function(){var e=this.querySelector(".sidebox.layouts");e&&(AdminColumns.Layouts=new o(e))});var o=function(){function e(t){a(this,e),this.el=t,this.list_screen=t.dataset.type,this.button_add=this.el.querySelector("a.add-new"),this.createForm=new u(this.el.querySelector(".new")),this._layouts=new Map,this.getLayouts(),this.initEvents()}return s(e,[{key:"getLayouts",value:function(){var e=this;this.el.querySelectorAll(".item.layout").forEach(function(t){var n=t.dataset.screen;e._layouts.set(n,new r(t,n,e.list_screen))})}},{key:"initEvents",value:function(){var e=this;this.button_add.addEventListener("click",function(t){t.preventDefault(),e.button_add.classList.contains("open")?e.cancelNewLayout():e.addNewLayout()}),jQuery(this.el).sortable({items:".item.layout",axis:"y",containment:jQuery(this.el),handle:".cpacicon-move",stop:function(){e.setNewOrder()}}),jQuery(document).on("AC_Form_AfterUpdate",function(){e._layouts.forEach(function(e){e.saveSettings()})})}},{key:"setNewOrder",value:function(){var e=[];this.el.querySelectorAll(".item.layout").forEach(function(t){e.push(t.dataset.screen)}),this.storeLayoutOrder(e)}},{key:"storeLayoutOrder",value:function(e){return jQuery.ajax({url:ajaxurl,method:"POST",data:{_ajax_nonce:acp_layouts._nonce,action:"acp_update_layout_order",list_screen:this.list_screen,order:e}})}},{key:"addNewLayout",value:function(){this.button_add.classList.add("open"),this.createForm.open()}},{key:"cancelNewLayout",value:function(){this.button_add.classList.remove("open"),this.createForm.close()}}]),e}(),r=function(){function e(t,n,i){a(this,e),this.el=t,this.key=n,this.list_screen=i,this.initEvents()}return s(e,[{key:"isReadOnly",value:function(){return this.el.classList.contains("read_only")}},{key:"initEvents",value:function(){var e=this;this.el.querySelector(".cpacicon-move").addEventListener("click",function(e){return e.stopPropagation()}),this.el.querySelector(".head ").addEventListener("click",function(t){t.preventDefault(),e.isOpen()?e.close():e.open()}),this.el.querySelectorAll(".head input, .head a").forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation()})});var t=this.el.querySelector(".save");t&&t.addEventListener("click",function(){e.saveSettings()}),["change","keyup"].forEach(function(t){var n=e.el.querySelector("input.name");n.addEventListener(t,function(t){var a=t.target.value;""===a&&(a=n.dataset.value),e.el.querySelector(".head .title").innerText=a})}),l(jQuery(this.el).find("select.users")),c(jQuery(this.el).find("select.roles"))}},{key:"isOpen",value:function(){return this.el.classList.contains("open")}},{key:"open",value:function(){this.el.classList.add("open"),jQuery(this.el.querySelector(".body")).slideDown(200)}},{key:"close",value:function(){this.el.classList.remove("open"),jQuery(this.el.querySelector(".body")).slideUp(200)}},{key:"getData",value:function(){return jQuery(this.el.querySelector(".body form")).serialize()}},{key:"startLoading",value:function(){this.el.classList.add("loading")}},{key:"stopLoading",value:function(){this.el.classList.remove("loading")}},{key:"getNameElement",value:function(){return this.el.querySelector("input.name")}},{key:"saveSettings",value:function(){var e=this,t=this.getNameElement(),n=jQuery(this.el);this.isReadOnly()||(e.startLoading(),jQuery.post(ajaxurl,{action:"acp_update_layout",_ajax_nonce:acp_layouts._nonce,list_screen:this.list_screen,data:e.getData()},function(e){e&&(e.success?(t.dataset.value=t.value,n.find(".save-message").slideDown().delay(1e3).slideUp(),n.find(".title-div span.description").text(e.data.title_description)):e.data&&"empty-name"===e.data&&n.addClass("open").find(".body").slideDown().find(".row.name").addClass("save-error"))},"json").always(function(){e.stopLoading()}))}}]),e}(),u=function(){function e(t){a(this,e),this.el=t,this.initEvents()}return s(e,[{key:"open",value:function(){jQuery(this.el).slideDown()}},{key:"close",value:function(){jQuery(this.el).slideUp()}},{key:"initEvents",value:function(){var e=this;this.el.querySelector(".new form").addEventListener("submit",function(t){e.el.querySelector(".row.name input").value||(t.preventDefault(),e.el.querySelector(".row.name").classList.add("save-error"))}),l(jQuery(this.el).find("select.users")),c(jQuery(this.el).find("select.roles"))}}]),e}(),l=function(e){e.ac_select2({placeholder:acp_layouts.users,multiple:!0,theme:"acs2",minimumInputLength:0,escapeMarkup:function(e){return jQuery("<div>"+e+"</div>").text()},ajax:{type:"POST",url:ajaxurl,dataType:"json",delay:350,data:function(e){return{action:"acp_layout_get_users",_ajax_nonce:acp_layouts._nonce,search:e.term,page:e.page}},processResults:function(e){return e&&e.success&&e.data?e.data:{results:[]}},cache:!0}})},c=function(e){e.each(function(){jQuery(this).ac_select2({placeholder:acp_layouts.roles,theme:"acs2"}).on("select2:select",function(){jQuery(this).ac_select2("open")}).on("select2:open",function(){setTimeout(function(){jQuery(".select2-container.select2-container--open .select2-dropdown li[role=group]").each(function(){jQuery(this).find("li[aria-selected=false]").length>0?jQuery(this).show():jQuery(this).hide()})},1)})})}}});